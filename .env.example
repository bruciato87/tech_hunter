SUPABASE_URL=
SUPABASE_SERVICE_ROLE_KEY=
SUPABASE_TABLE=arbitrage_opportunities
# Optional when writing rows as authenticated user instead of service role.
SUPABASE_SCANNER_USER_ID=
SUPABASE_WRITE_MAX_ATTEMPTS=3
SUPABASE_WRITE_RETRY_DELAY_MS=250

TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

OPENROUTER_API_KEYS=
OPENROUTER_MODEL=openrouter/auto
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1/chat/completions
# Ordered from strongest to weakest free-tier target model.
OPENROUTER_FREE_MODELS=perplexity/sonar,deepseek/deepseek-r1:free,qwen/qwen-2.5-72b-instruct:free,meta-llama/llama-3.3-70b-instruct:free,mistralai/mistral-small-3.1-24b-instruct:free,google/gemini-2.0-flash-exp:free
# Optional per-model power overrides (JSON object), e.g. {"perplexity/sonar": 95, "qwen/qwen-2.5-72b-instruct:free": 110}
OPENROUTER_MODEL_POWER_JSON={"perplexity/sonar":300,"deepseek/deepseek-r1:free":220,"qwen/qwen-2.5-72b-instruct:free":180,"meta-llama/llama-3.3-70b-instruct:free":170,"mistralai/mistral-small-3.1-24b-instruct:free":160,"google/gemini-2.0-flash-exp:free":150}
OPENROUTER_MAX_MODELS_PER_REQUEST=2
OPENROUTER_MODEL_COOLDOWN_SECONDS=900
OPENROUTER_MODEL_NOT_FOUND_COOLDOWN_SECONDS=86400
OPENROUTER_MODEL_TRANSIENT_COOLDOWN_SECONDS=120

HEADLESS=true
MIN_SPREAD_EUR=40
# conservative | balanced | aggressive
STRATEGY_PROFILE=balanced
# off | hourly | every2h | every3h | every4h | every6h | every8h | every12h | daily
SCAN_SCHEDULE_PROFILE=hourly
MAX_PARALLEL_PRODUCTS=3
SCAN_TELEGRAM_INDIVIDUAL_ALERTS=false
SCAN_TARGET_PRODUCTS=8
SCAN_CANDIDATE_MULTIPLIER=4
SCAN_DYNAMIC_QUERIES_ENABLED=true
SCAN_DYNAMIC_QUERY_LIMIT=12
SCAN_DYNAMIC_EXPLORATION_RATIO=0.35
SCAN_DYNAMIC_TREND_MIN_SCORE=-35
SCAN_REQUIRE_COMPLETE_RESELLER_QUOTES=false
SCAN_RESELLER_REFILL_BATCH_MULTIPLIER=2
EXCLUDE_MIN_KEEP=4
EXCLUDE_LOOKBACK_DAYS=1
EXCLUDE_DAILY_RESET=true
EXCLUDE_RESET_TIMEZONE=Europe/Rome
NON_PROFITABLE_SAVE_MAX_PARALLEL=3
SCAN_IT_QUOTA=6
SCAN_EU_QUOTA=6
SCORING_ENABLE=true
SCORING_LOOKBACK_DAYS=30
SCORING_HISTORY_LIMIT=2000
SCAN_FILTER_ACCESSORIES=true
PLAYWRIGHT_NAV_TIMEOUT_MS=45000
REBUY_USE_STORAGE_STATE=true
REBUY_STORAGE_STATE_B64=
MPB_MAX_ATTEMPTS=3
MPB_USE_STORAGE_STATE=true
MPB_STORAGE_STATE_B64=
MPB_BLOCK_COOLDOWN_SECONDS=1800
MPB_REQUIRE_STORAGE_STATE=true
MPB_API_PURCHASE_PRICE_ENABLED=true
MPB_API_MARKET=it
MPB_API_CONDITION=excellent
MPB_API_QUERY_LIMIT=1
MPB_API_MODEL_LIMIT=2
MPB_API_SEARCH_ROWS=8
MPB_API_TIME_BUDGET_SECONDS=12
VALUATOR_MAX_PARALLEL_MPB=1
VALUATOR_MAX_PARALLEL_TRENDDEVICE=2
VALUATOR_QUERY_VARIANTS_MPB_MAX=1
VALUATOR_QUERY_VARIANTS_TRENDDEVICE_MAX=2
VALUATOR_QUERY_VARIANTS_REBUY_MAX=2
VALUATOR_TIMEOUT_MPB_SECONDS=28
VALUATOR_TIMEOUT_TRENDDEVICE_SECONDS=45
VALUATOR_TIMEOUT_REBUY_SECONDS=45
TRENDDEVICE_LEAD_EMAIL=
TRENDDEVICE_USE_STORAGE_STATE=true
TRENDDEVICE_STORAGE_STATE_B64=
TRENDDEVICE_EMAIL_GATE_WAIT_MS=6500
# Optional JSON overrides for UI selector drift auto-adaptation.
# Example:
# {"*":{"price":["[data-testid*='price' i]"]},"rebuy":{"search_input":["input[aria-label*='cerca' i]"]}}
VALUATOR_SELECTOR_OVERRIDES_JSON=

# Optional local debug source (JSON array of products).
AMAZON_PRODUCTS_JSON=[]

# Amazon Warehouse automatic source (used when /scan is called without payload).
AMAZON_WAREHOUSE_ENABLED=true
AMAZON_WAREHOUSE_MARKETPLACES=it,eu
AMAZON_WAREHOUSE_MAX_PRODUCTS=8
AMAZON_WAREHOUSE_MAX_PRICE_EUR=
AMAZON_WAREHOUSE_QUERIES=iphone 14 pro 128gb amazon warehouse,macbook air m1 amazon warehouse,sony alpha amazon warehouse,canon eos amazon warehouse
AMAZON_WAREHOUSE_PER_MARKETPLACE_LIMIT=4
AMAZON_WAREHOUSE_PROXY_URLS=
AMAZON_WAREHOUSE_ROTATE_PROXY=true
AMAZON_WAREHOUSE_USER_AGENTS=
AMAZON_WAREHOUSE_ROTATE_USER_AGENT=true
AMAZON_WAREHOUSE_MAX_ATTEMPTS_PER_QUERY=3
AMAZON_WAREHOUSE_RETRY_DELAY_MS=700
AMAZON_WAREHOUSE_FAIL_FAST_ON_SORRY=true
AMAZON_WAREHOUSE_STEALTH=true
AMAZON_WAREHOUSE_USE_STORAGE_STATE=true
AMAZON_WAREHOUSE_STORAGE_STATE_B64=
AMAZON_WAREHOUSE_STORAGE_STATE_B64_IT=
AMAZON_WAREHOUSE_STORAGE_STATE_B64_DE=
AMAZON_WAREHOUSE_STORAGE_STATE_B64_FR=
AMAZON_WAREHOUSE_STORAGE_STATE_B64_ES=
# Optional cart validator to detect real net price with checkout promos.
# It adds item to cart in authenticated session, reads subtotal/promo/total, then removes item.
AMAZON_WAREHOUSE_CART_PRICING_ENABLED=false
AMAZON_WAREHOUSE_CART_PRICING_MAX_ITEMS=4
AMAZON_WAREHOUSE_CART_PRICING_REQUIRE_EMPTY_CART=true
AMAZON_WAREHOUSE_CART_PRICING_ALLOW_DELTA=true
AMAZON_WAREHOUSE_CART_PRICING_DIRECT_ADD_FALLBACK=true
AMAZON_WAREHOUSE_CART_PRICING_FORCE_EMPTY_AFTER_HOST=true
AMAZON_WAREHOUSE_DEBUG_ON_EMPTY=true
AMAZON_WAREHOUSE_DEBUG_DIR=/tmp/tech_sniper_it_debug

# Vercel orchestrator env vars (server-side only)
GITHUB_TOKEN=
GITHUB_OWNER=
GITHUB_REPO=
GITHUB_EVENT_TYPE=scan
SCAN_SECRET=
TELEGRAM_ALLOWED_CHAT_IDS=
TELEGRAM_WEBHOOK_SECRET_TOKEN=
